<!DOCTYPE html>
<html>
<head>
	<title>Decendent Binding With Properties</title>
</head>
<body>
<div data-bind="withProperties: { emotion: 'happy' }">
    Today I feel <span data-bind="text: emotion"></span>. <!-- Displays: happy -->
</div>
<div data-bind="withProperties: { emotion: 'whimsical' }">
    Today I feel <span data-bind="text: emotion"></span>. <!-- Displays: whimsical -->
</div>
<div data-bind="withProperties: { emotion: 'awesome' }">
    Today I feel <span data-bind="text: emotion"></span>. <!-- Displays: whimsical -->
</div>

<script type="text/javascript" src="../js/jquery.js" ></script>
<script type="text/javascript" src="../js/knockout-3.3.0.js"></script>
<script type="text/javascript">
function viewModel()
{
	ko.bindingHandlers.withProperties = {
    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
        // Make a modified binding context, with a extra properties, and apply it to descendant elements
        var innerBindingContext = bindingContext.extend(valueAccessor);
        console.log(innerBindingContext);
        ko.applyBindingsToDescendants(innerBindingContext, element);
 
        // Also tell KO *not* to bind the descendants itself, otherwise they will be bound twice
        return { controlsDescendantBindings: true };
    }
};
}
ko.applyBindings(new viewModel());
</script>

</body>
</html>